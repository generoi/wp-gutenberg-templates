!function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=0)}([function(e,t,o){e.exports=o(1)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(2),n=(o.n(a),o(3)),i=(o.n(n),o(4)),c=o.n(i),l=o(5),r=(o.n(l),function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}());new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.previousTemplateName=null,this.templateName=void 0,Object(a.subscribe)(this.subscribe.bind(this))}return r(e,[{key:"subscribe",value:function(){var e=Object(a.select)("core/editor").getEditedPostAttribute("template");Object(a.select)("core/block-editor").getTemplate(),Object(a.select)("core/block-editor").getTemplateLock();if(void 0!==e)if(void 0!==this.templateName){if(e!==this.templateName){if(this.previousTemplateName=this.templateName,this.templateName=e,e)return void this.changeTemplate(this.templateName);if(""===e){var t=Object(a.dispatch)("core/block-editor"),o=t.updateSettings,n=t.setTemplateValidity;o({templateLock:!1}),n(!0)}}}else this.templateName=e}},{key:"getTemplate",value:function(e,t){c()({path:"/gutenberg-templates/v1/template",data:{template:e}}).then(function(e){var o=e.template,a=e.template_lock;t({template:o,templateLock:a})})}},{key:"setInitialTemplate",value:function(e){this.getTemplate(e,function(e){var t=e.template,o=e.templateLock,n=Object(a.dispatch)("core/block-editor"),i=n.updateSettings,c=n.setTemplateValidity,r=Object(a.select)("core/block-editor").getBlocks(),s=!t||"all"!==o||Object(l.doBlocksMatchTemplate)(r,t);i({templateLock:o,template:t}),c(s)})}},{key:"changeTemplate",value:function(e){var t=this;this.getTemplate(e,function(e){var o=e.template,i=e.templateLock,c=Object(a.dispatch)("core/block-editor"),r=c.resetBlocks,s=c.updateSettings,p=Object(a.dispatch)("core/notices"),u=p.createWarningNotice,m=p.removeNotice,b=Object(a.select)("core/block-editor").getBlocks(),f=function(){r(Object(l.synchronizeBlocksWithTemplate)(b,o)),s({template:o,templateLock:i})};!o||Object(l.doBlocksMatchTemplate)(b,o)?f():u(Object(n.__)("The content of your post doesn't match the assigned template.","wp-gutenberg-templates"),{actions:[{label:Object(n.__)("Keep it as is","wp-gutenberg-templates"),onClick:function(){"all"===i&&t.revertTemplate(),m("SYNCHRONIZE_TEMPLATE_NOTICE_ID")}},{label:Object(n.__)("Reset the template","wp-gutenberg-templates"),onClick:function(){window.confirm(Object(n.__)("Resetting the template may result in loss of content, do you want to continue?","wp-gutenberg-templates"))&&f(),m("SYNCHRONIZE_TEMPLATE_NOTICE_ID")},className:"is-primary"}],isDismissible:!0,id:"SYNCHRONIZE_TEMPLATE_NOTICE_ID"})})}},{key:"revertTemplate",value:function(){Object(a.dispatch)("core/editor").editPost({template:this.previousTemplateName})}}]),e}())},function(e,t){e.exports=wp.data},function(e,t){e.exports=wp.i18n},function(e,t){e.exports=wp.apiRequest},function(e,t){e.exports=wp.blocks}]);