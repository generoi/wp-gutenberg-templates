!function(e){var t={};function a(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),o=(a.n(i),a(3)),n=(a.n(o),a(4)),l=a.n(n),c=a(5),r=(a.n(c),function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}());new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.previousTemplate=null,this.template=void 0,Object(i.subscribe)(this.subscribe.bind(this))}return r(e,[{key:"subscribe",value:function(){var e=Object(i.select)("core/editor").getEditedPostAttribute("template");if(void 0!==e){if(void 0===this.template)return this.template=e,this.defaultTemplate=Object(i.select)("core/block-editor").getTemplate(),this.defaultTemplateLock=Object(i.select)("core/block-editor").getTemplateLock(),void(this.template&&this.setInitialTemplate(this.template));if(e!==this.template){if(this.previousTemplate=this.template,this.template=e,e)return void this.changeTemplate(this.template);if(""===e){var t=Object(i.dispatch)("core/block-editor"),a=t.updateSettings,o=t.setTemplateValidity;a({templateLock:this.defaultTemplateLock,template:this.defaultTemplate}),o(!0)}}}}},{key:"setInitialTemplate",value:function(e){var t=Object(i.dispatch)("core/block-editor"),a=t.updateSettings,o=t.setTemplateValidity;l()({path:"/gutenberg-templates/v1/template",data:{template:e}}).then(function(e){var t=Object(i.select)("core/block-editor").getBlocks(),n=e.template,l=e.template_lock,r=!n||"all"!==l||Object(c.doBlocksMatchTemplate)(t,n);a({templateLock:l,template:n}),o(r)})}},{key:"changeTemplate",value:function(e){var t=this,a=Object(i.dispatch)("core/block-editor"),n=a.resetBlocks,r=a.updateSettings,s=Object(i.dispatch)("core/notices"),p=s.createWarningNotice,u=s.removeNotice;l()({path:"/gutenberg-templates/v1/template",data:{template:e}}).then(function(e){var a=Object(i.select)("core/block-editor").getBlocks(),l=e.template,s=e.template_lock,m=function(){n(Object(c.synchronizeBlocksWithTemplate)(a,l)),r({template:l,templateLock:s})};!l||Object(c.doBlocksMatchTemplate)(a,l)?m():p(Object(o.__)("The content of your post doesn't match the assigned template.","wp-gutenberg-templates"),{actions:[{label:Object(o.__)("Keep it as is","wp-gutenberg-templates"),onClick:function(){"all"===s&&t.revertTemplate(),u("SYNCHRONIZE_TEMPLATE_NOTICE_ID")}},{label:Object(o.__)("Reset the template","wp-gutenberg-templates"),onClick:function(){window.confirm(Object(o.__)("Resetting the template may result in loss of content, do you want to continue?","wp-gutenberg-templates"))&&m(),u("SYNCHRONIZE_TEMPLATE_NOTICE_ID")},className:"is-primary"}],isDismissible:!0,id:"SYNCHRONIZE_TEMPLATE_NOTICE_ID"})})}},{key:"revertTemplate",value:function(){Object(i.dispatch)("core/editor").editPost({template:this.previousTemplate})}}]),e}())},function(e,t){e.exports=wp.data},function(e,t){e.exports=wp.i18n},function(e,t){e.exports=wp.apiRequest},function(e,t){e.exports=wp.blocks}]);